---
layout: post
title: Python Guide for Java Developers
tags: [ImageMagick]
color: rgb(250, 154, 133)
feature-img: "assets/img/post-cover/32-cover.png"
thumbnail: "assets/img/post-cover/32-cover.png"
author: QubitPi
excerpt_separator: <!--more-->
---

The purpose of this guide is to help any **experienced Java developers** with situations like this: you are writing a
Python project (You love Java, but for some reason you end up being in a situation where you have to put it in Python)
This guide covers you using a comparative strategy: we teach you Python by linking Java with Python's equivalent. You
know Maven and we tell you what is the "Maven" equivalent in Python; You know Python doesn't play with `Class` in the
same way how Java does and we teach you that.

This guide assumes you know all the basics of Python; you know what a Python `dict` is and you know there is something
called Python shell that executes Python script in your terminal, etc.

<!--more-->

* TOC
{:toc}

## Books

* [The Hitchhiker's Guide to Python]({{ "/assets/pdf/The%20Hitchhiker's%20Guide%20to%20Python.pdf" | relative_url}})
* [Python for the Busy Java Developer]({{ "/assets/pdf/Python%20for%20the%20Busy%20Java%20Developer.pdf" | relative_url}})

## Installing Python 3 on Mac OS X

Mac OS X comes with Python 2.7 out of the box. The version of Python that ships with OS X is great for learning, but
it's not good for development. The version shipped with OS X may be out of date from the
[official current Python release](https://www.python.org/downloads/mac-osx/), which is considered the stable production
version.

Before installing Python, youâ€™ll need to install GCC. GCC can be obtained by downloading
[Xcode](https://developer.apple.com/xcode/)

> ðŸ“‹ If you perform a fresh install of Xcode, you will also need to add the commandline tools by running
> `xcode-select --install` on the terminal.

While OS X comes with a large number of Unix utilities, those familiar with Linux systems will notice one key component
missing: a package manager. [Homebrew](https://brew.sh/) fills this void.

To [install Homebrew](https://brew.sh/#install), open Terminal or your favorite OS X terminal emulator and run

```bash
$ /bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install.sh)"
```

Now, we can install Python 3:

```bash
$ brew install python
```

### Use pyenv to Run Multiple Versions of Python on a Mac

```bash
$ brew install pyenv
```

In order to use the version of Python through pyenv, it's essential to understand the shell's `PATH` variable. `PATH`
determines where the shell searches for files by the name of the command. You must ensure the shell will find the
version of Python run by pyenv, not the one installed by default (which is often called the system version). If you
don't change the path, here is the result:

```bash
$ which python
/usr/bin/python
```

That's the system version of Python. To set up pyenv correctly, you can run the following in Bash or zsh:

```bash
$ PATH=$(pyenv root)/shims:$PATH
```

Now, if you check the version of Python, you'll see it is the one managed by pyenv:

```bash
$ which python
/Users/my_username/.pyenv/shims/python
```

Now we could switch version

    pyenv install --list | grep " 3\.[678]"
    pyenv install -v 3.7.2 
    python -V

#### Configure PyCharm/IntellIj with pyenv

We will first need to know the path of the Python we just switched to using pyenv:

```bash
$ which python
.../.pyenv/shims/python
```

Then, we will add `/Users/hai/.pyenv/shims/python` to the Python interpretor config:

![Error pycharm-configure-pyenv-interpretor.png]({{ "/assets/img/pycharm-configure-pyenv-interpretor.png" | relative_url}})

## Links

- https://www.askpython.com/

## Python Standards

If you know JVM Specificaiton or Java Language Specification, you might want to know the "equivalents" of them in
Python, this is the place you go - [PEP's](https://www.python.org/dev/peps/)

Must-read PEPs:

- [how to document Python code](https://www.python.org/dev/peps/pep-0257/)
- [code style](https://www.python.org/dev/peps/pep-0008/#constants)
- [variable annotation](https://www.python.org/dev/peps/pep-0526/)
- [Type Hints](https://www.python.org/dev/peps/pep-0484/)

## How to create a Python "maven" package

You know all the details about maven. Now you wonder what if I would like to make a Python package? This is where you
start - https://python-packaging.readthedocs.io/en/latest/index.html

### setuptools

- **access resource files** (remember the Maven `resource` directory?):
  https://setuptools.readthedocs.io/en/latest/pkg_resources.html

### package and class

Python treats `Class` differently. They call it `module` and a `module` could contain multiple `classes`. Collect some
related class to one module(source file), and collect some related module to one package

### Documentation

#### Language

You will find multiples for writing Python docs, I recommend
[reStructuredText](https://docutils.sourceforge.io/rst.html) which is the supported language by the popular
Python documentation generator [Sphinx](https://www.sphinx-doc.org/en/master/). Note that the
[official Python documentation](https://docs.python.org/3/) is generated by Sphinx.

#### Documentation Generator

Documentation is generated using [maven site](https://maven.apache.org/plugins/maven-site-plugin/). For setuptools,
refer to this approach - https://medium.com/@eikonomega/getting-started-with-sphinx-autodoc-part-1-2cebbbca5365 .

Unlike maven which makes it hard to change the style/look of the generated site, you get little bit of freedom on the
style of the site for Python using [Sphinx Theming](https://www.sphinx-doc.org/en/master/usage/theming.html)

#### Checkstyle

[Pylint](https://www.pylint.org/) is the Python's equivalent of
[checkstyle](https://checkstyle.sourceforge.io/index.html). People know that to make checkstyle useful in Maven, they
use [maven-checkstyle-plugin](https://maven.apache.org/plugins/maven-checkstyle-plugin/index.html). For setuptools in
Python, it is [setuptools-lint](https://pypi.org/project/setuptools-lint/) and [black](https://pypi.org/project/black/)

### Test

- [doctest](https://docs.python.org/3/library/doctest.html#module-doctest): commenting and testing at the same time
  (unit test)
- [mock](https://pypi.org/project/mock/>): Python's mocking framework
- [tox](https://tox.readthedocs.io/en/latest/): test package under various python version envrionment
- [requests-mock](https://requests-mock.readthedocs.io/en/latest/): Mock HTTP
- [FreezeGun](https://github.com/spulec/freezegun): mock datetime module

#### Code Coverage

https://coverage.readthedocs.io/en/coverage-5.1/

#### Test Report

- [pytest-html](https://pypi.org/project/pytest-html/)

## Commonly Used Libraries

You know the best industry Java JSON library is Jackson so you always use it. You might wonder that are those popular
equivalents in Python. Here they are

### HTTP

https://requests.readthedocs.io/en/master/ .

#### URL-related

- [urllib.parse](https://docs.python.org/3/library/urllib.parse.html)

### Hashing

- [hashlib](https://docs.python.org/3/library/hashlib.html)
- [hmac](https://docs.python.org/3/library/hmac.html#module-hmac)

## Some useful caveates to know

When you send POST request, you should read this first:
https://requests.readthedocs.io/en/master/user/quickstart/#more-complicated-post-requests
Chances are you will not notice that the JSON payload is not a string. It's actually a ``dict`` object. Passing a string
object to POST method might gives you a 2 hours of painful debugging session(at least that was the case for me).

## Syntax for Java Developers

### Python Logging

https://docs.python.org/3.1/library/logging.html

### `*args` and `**kwargs` in Python

#### `*args`

The special syntax `*args` in function definitions in python is used to pass a variable number of arguments to a
function. It is used to pass a non-keyworded, variable-length argument list.

- The syntax is to use the symbol `*` to take in a variable number of arguments; by convention, it is often used with
  the word args.
- What `*args` allows you to do is take in more arguments than the number of formal arguments that you previously
  defined. With `*args`, any number of extra arguments can be used on to your current formal parameters (including
  zero extra arguments).
- Using the `*`, the variable that we associate with the `*` becomes an iterable meaning you can do things like
  iterate over it, run some higher order functions such as map and filter, etc.

```python
def myFun(arg1, *argv):
    print ("First argument :", arg1)
    for arg in argv:
        print("Next argument through *argv :", arg)

myFun("A", "B", "C", "D")
```

Output:

    First argument : A
    Next argument through *argv : B
    Next argument through *argv : C
    Next argument through *argv : D

#### `**kwargs`

The special syntax `**kwargs` in function definitions in python is used to pass a keyworded, variable-length argument
list. We use the name `kwargs` with the double star. The reason is because the double star allows us to pass through
keyword arguments (and any number of them).

- A keyword argument is where you provide a name to the variable as you pass it into the function.
- One can think of the `kwargs` as being a dictionary that maps each keyword to the value that we pass alongside it.
That is why when we iterate over the kwargs there doesn't seem to be any order in which they were printed out.

```python
def myFun(arg1, **kwargs):
    for key, value in kwargs.items():
        print ("%s == %s" %(key, value))

myFun("Foo", first ='Bar', mid ='Bat', last='Baz')
```

Output:

    last == Bar
    mid == Bat
    first == Baz

### Make function return multiple return values

You can use a `typing.Tuple` type hint (to specify the type of the content of the tuple, if it is not necessary, the
built-in class `tuple` can be used instead):

```python
from typing import Tuple

def greeting(name: str) -> Tuple[str, List[float], int]:
    # do something
    return a, b, c
```

## Debug Python


### `SyntaxError- EOL while scanning string literal`


An EOL ( End of Line ) error indicates that the Python interpreter expected a particular character or set of characters
to have occurred in a specific line of code, but that character is not found before the end of the line . This results
in stopping the program execution and throwing a syntax error.

The `SyntaxError: EOL while scanning string literal` error when:

1. A closing quote is missing, for example

    ```python
    def printMsg():
        return "This is a test
    printMsg()
    ```
    
    output:
    
    ```
    return "This is a test
                         ^
    SyntaxError: EOL while scanning string literal
    ```
        
2. A string spans multiple lines, for example

    ```python
    def printMsg():
        str = "This is
          a test"
        print(str)
    printMsg()
    ```

The solution to the 2nd case is to use triple quotes:

```python
def printMsg():
    str = """This is
      a test"""
    print(str)
printMsg()
```
