---
layout: post
title: OpenVPN
tags: [VPN, Entrepreneurship]
category: FINALIZED
color: rgb(237, 127, 33)
feature-img: "assets/img/post-cover/7-cover.png"
thumbnail: "assets/img/post-cover/7-cover.png"
author: QubitPi
excerpt_separator: <!--more-->
---

It is necessary to secure and protect the data transmitted on a wide network of Internet. Virtual Private Networks (VPNs)
were created out of a greater need for secured communication across an otherwise unprotected infrastructure, such as 
internet, over private channels, where the community at large isn't able to eavesdrop

<!--more-->

* TOC
{:toc}

What is a VPN?
--------------

Put simply, **a VPN allows an administrator to create a "local" network between multiple computers on varying network 
segments**. In some instances, those machines can be on the same LAN, they can be distant from each other across the
vast Internet, or they can even be connected across a multitude of connection media such as wireless uplinks, satellite, 
dial-up-networking, and so on. The P in VPN comes from the added protection to make that virtual network private.
Network traffic that is flowing over a VPN is often referred to as **inside the (VPN) tunnel**, compared to all the
other traffic that is **outside the tunnel**.

In the following figure, network traffic is shown as it traditionally traverses across multiple network segments and the 
general Internet. Here, this traffic is relatively open to inspection and analysis, which is insecure:

![Error loading vpn-insecure-network.png]({{ "/assets/img/vpn-insecure-network.png" | relative_url}})

When a VPN is used, the traffic inside the tunnel is no longer identifiable. Here is an example of the traffic within a 
VPN. While the VPN itself is routed across the Internet like in the preceding figure, devices along the network path
only see VPN traffic; those devices are completely unaware of what is being transmitted inside the private tunnel. 
Protected protocols, such as HTTPS and SSH, will still be protected inside the tunnel from other VPN users, but will be 
additionally unidentifiable from outside the tunnel. A VPN not only encrypts the traffic within, it hides and protects 
individual data streams from those outside the tunnel.

![Error loading vpn-secure.png]({{ "/assets/img/vpn-secure.png" | relative_url}})

### OpenVPN

OpenVPN is often called an SSL-based VPN, as it uses the SSL/TLS protocol to secure the connection. However, OpenVPN
also uses HMAC in combination with a digest (or hashing) algorithm for ensuring the integrity of the packets delivered.
It can be configured to use pre-shared keys as well as X.509 certificates. These features are not typically offered by 
other SSL-based VPNs.

Furthermore, OpenVPN uses a **virtual network adapter (a tun or tap device)** as an interface between the user-level 
OpenVPN software and the operating system. In general, any operating system that has support for a tun/tap device can
run OpenVPN. This currently includes Linux, Free/Open/NetBSD, Solaris, AIX, Windows, and Mac OS, as well as iOS/Android 
devices. For all these platforms, client software needs to be installed, which sets OpenVPN apart from client-less
or web-based VPNs.

OpenVPN has the notion of a control channel and a data channel, both of which are encrypted and secured differently. 
However, all traffic passes over a single UDP or TCP connection. The control channel is encrypted and secured using 
SSL/TLS, the data channel is encrypted using a custom encryption protocol.

#### OpenVPN Packages

There are several OpenVPN packages available on the Internet:

* The open source or community version of OpenVPN
* OpenVPN Access Server, the closed-source commercial offering by OpenVPN Inc.
* The mobile platform versions of OpenVPN for both Android and iOS (part of the code is closed-source, as a requirement
  of Apple)

#### OpenVPN Internals

##### The Tun/Tap Driver

One of the basic building blocks of OpenVPN is the tun/tap driver. The concept of the tun/tap driver comes from the 
Unix/Linux world, where it is often natively available as part of the operating system. This is a virtual network
adapter that is treated by the operating system as either a point-to-point adapter (tun-style) for IP-only traffic or as
a full virtual Ethernet adapter for all types of traffic (tap-style). At the backend of this adapter is an application, 
such as OpenVPN, to process the incoming and outgoing traffic. Linux, Free/Open/NetBSD, Solaris and Mac OS include a tun 
kernel driver, which is capable of both tun-style and tap-style operations.

![Error loading vpn-tun-tap.png]({{ "/assets/img/vpn-tun-tap.png" | relative_url}})

The flow of traffic from a user application via OpenVPN is depicted in the preceding diagram. In the diagram, the 
application is sending traffic to an address that is reachable via the OpenVPN tunnel. The steps are as follows:

1. The application hands over the packet to the operating system.
2. The OS decides using normal routing rules that the packet needs to be routed via the VPN.
3. The packet is then forwarded to the kernel tun device.
4. The kernel tun device forwards the packets to the (user-space) OpenVPN process.
5. The OpenVPN process encrypts and signs the packet, fragments it if necessary, and then hands it over to the kernel 
   again to send it to the address of the remote VPN endpoint.
6. The kernel picks up the encrypted packet and forwards it to the remote VPN endpoint, where the same process is
   reversed. It can also be seen in this diagram that the performance of OpenVPN will always be less than that of a 
   regular network connection. For most applications, the performance loss is minimal and/or acceptable. However, for 
   speeds greater than 1GBps, there is a performance bottleneck, both in terms of bandwidth and latency.


* [Free Profile](https://www.vpnbook.com/) - OpenVPN tab (need VPN access first)
* [Bypass OpenVPN for particular IP](https://serverfault.com/a/487471)

## Config File

When people talk about "openvpn client config", they are referring to the `.ovpn` files that you drop to the
"Import Profiles" section of OpenVPN. Add those lines to `.ovpn` file after, for example, "remote pl226.vpnbook.com 80"
line

## Contingency Plan

* [Lantern](https://github.com/getlantern/download)
* [Free VPN for Chrome - VPN Proxy VeePN](https://chrome.google.com/webstore/detail/free-vpn-for-chrome-vpn-p/majdfhpaihoncoakbjgbdhglocklcgno?hl=en)
